{% extends 'Dashboard/base.html' %}
{% block content %}

<h1 style="text-align: center; color: #1e90ff; margin-top: 20px;">Invoice List</h1>

<!-- Search Box -->
<div style="width: 90%; margin: 20px auto; display: flex; justify-content: flex-end;">
    <input type="text" id="searchBox" placeholder="Search invoices..." 
           style="padding: 8px; width: 300px; border: 1px solid #ccc; border-radius: 5px;">
</div>

<table style="width: 90%; margin: 20px auto; border-collapse: collapse; background-color: #fff; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
    <thead style="background-color: #1e90ff; color: white;">
        <tr>
            <th style="padding: 10px;">S.N</th>
            <th style="padding: 10px;">Tenant</th>
            <th style="padding: 10px;">Date Issued</th>
            <th style="padding: 10px;">Due Date</th>
            <th style="padding: 10px;">Total Amount</th>
        </tr>
    </thead>
    <tbody id="invoiceTable">
        {% for invoice in invoices %}
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px;">{{ forloop.counter}}</td>
            <td style="padding: 10px;">{{ invoice.tenant.tenant_name }}</td>  
            <td style="padding: 10px;">{{ invoice.date_issued }}</td>
            <td style="padding: 10px;">{{ invoice.due_date }}</td>
            <td style="padding: 10px;">${{ invoice.total_amount }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" style="padding: 10px; text-align: center;">No invoices available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    document.getElementById("searchBox").addEventListener("keyup", function () {
        let searchValue = this.value.toLowerCase();
        let rows = document.querySelectorAll("#invoiceTable tr");

        rows.forEach(row => {
            let text = row.innerText.toLowerCase();
            row.style.display = text.includes(searchValue) ? "" : "none";
        });
    });
</script>

{% endblock %}
